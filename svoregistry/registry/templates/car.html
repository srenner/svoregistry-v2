{% extends 'base.html' %}
{% load filters %}
{% block title %}Mustang SVO Registry{% endblock %}
{% block head %}
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@svoregistry">
	<meta name="twitter:title" content="{{car.year}} {{car.COLOR_CHOICES|color_lookup:car.color}} SVO {{car.vin}}">
	<meta name="twitter:description" content="{{twitter_description|truncatechars:200|striptags}}">
	<meta name="twitter:domain" content="SVOregistry.com">
	{% load staticfiles %}
{% endblock %}

{% load humanize %}
{%block content %}
<header>
	<h1>
		{{car.year|default_if_none:"Unknown Year"}} 
		{{ car.COLOR_CHOICES|color_lookup:car.color }}
		SVO
	</h1>
	<p class="text-center">VIN {{car.vin}}</p>	
</header>

<div class="row">
	<div id="divMap" class="map-small col-md-8 text-center"></div>
	<div id="divMeta" class="col-md-4">
		
		
		{% with count=entries.count %}
		<a id="aEntryLink" href="#entries">
			This SVO has {{entries.count}} entr{{count|pluralize:"y,ies"}} in the registry.
		</a>
		{% endwith %}
		<dl id="dlMeta" class="dl-horizontal">
			{% if car.year == "1984" %}
			<dt>Slapper bars</dt>
			<dd>{{car.slappers|yesno:"Yes,No"}}</dd>
			{% endif %}
			<dt>Interior</dt>
		    <dd>{{car.interior|default_if_none:"Unknown"}}</dd>
			
			<dt>Sunroof</dt>
			<dd>{{car.sunroof|yesno:"Yes,No"}}</dd>
			
			<dt>Original engine</dt>
			<dd>{{car.has_23|yesno:"Yes,No"}}</dd>
			
			<dt>Wing delete</dt>
			<dd>{{car.wing_delete|yesno:"Yes,No"}}</dd>
			
			<dt>On road</dt>
			<dd>{{car.on_road|yesno:"Yes,No"}}</dd>
			
			<dt>Deceased</dt>
			<dd>{{car.deceased|yesno:"Yes,No"}}</dd>
		</dl> 
	</div>

</div>
<hr>

<div class="row col-md-12 text-center">
	<a name="entries"></a>
	<h2 class="inline-header">Entries</h2>
	<button class="btn btn-lg btn-default" onclick="document.getElementById('divEntry').style.display=''"><span class="glyphicon glyphicon-plus-sign"></span> Add Entry</button>
</div>

<div class="row"></div>

<div class="registry-entry row container" id="divEntry" style="display: none">
	<div class="row registry-entry-header svo-{{car.color}}">
		<div class="col-md-12 col-sm-12">
			Add Entry for VIN {{car.vin}}
		</div>
	</div>
	<form role="form">
				<span class="hidden">{{ form.car }}</span>
				<div class="row hidden">
					<div id="divForSale" class="col-md-3">
						<span>{{ form.for_sale }}</span>
						<label for={{ form.for_sale.auto_id }}>
							Car is for sale
						</label>
					</div>
				</div>
				<div class="row">
					<span class="form-field col-md-3">{{ form.year.label_tag }} {{ form.year }}</span>
					<span id="spanSlappers" class="form-field col-md-3">{{ form.slappers.label_tag }} {{ form.slappers }}</span>
					<span class="form-field col-md-3">{{ form.mileage.label_tag }} {{ form.mileage }}</span>
					<span class="form-field col-md-3">
						{{ form.color.label_tag }}  {{ form.color }} 
					</span>

				</div>
				<div class="row">
					<span class="form-field col-md-3">{{ form.interior.label_tag }} {{ form.interior }}</span>
					<span class="form-field col-md-3">{{ form.sunroof.label_tag }} {{ form.sunroof }}</span>
					<span class="form-field col-md-3">{{ form.comp_prep.label_tag }} {{ form.comp_prep }}</span>
					<span id="spanOptionDelete" class="form-field col-md-3">{{ form.option_delete.label_tag }} {{ form.option_delete }}</span>
				</div>
				<div class="row">
					<span class="form-field col-md-3">{{ form.wing_delete.label_tag }} {{ form.wing_delete }}</span>
					<span class="form-field col-md-3">{{ form.has_23.label_tag }} {{ form.has_23 }}</span>
					<span class="form-field col-md-3">{{ form.on_road.label_tag }} {{ form.on_road }}</span>
					<span id="spanDeceased" class="form-field col-md-3">{{ form.deceased.label_tag }} {{ form.deceased }}</span>	
				</div>
				<div class="row">
					<span class="form-field col-md-6">{{ form.photo.label_tag }} {{ form.photo }}</span>
					<span class="form-field col-md-3">{{ form.owner.label_tag }} {{ form.owner }}</span>
					<span class="form-field col-md-3">{{ form.entry_datetime.label_tag }} {{ form.entry_datetime }}</span>
				</div>
	<hr>
			<div class="row">
				<span class="form-field col-md-3">{{ form.city.label_tag }} {{ form.city }}</span>
				<span class="form-field col-md-3">{{ form.state.label_tag }} {{ form.state }}</span>
				<span class="form-field col-md-3">{{ form.country.label_tag }} {{ form.country }}</span>
				<span class="form-field col-md-3">{{ form.zipcode.label_tag }} {{ form.zipcode }}</span>
				
			</div>
	<hr>
			<div class="row">
				<span class="form-field">{{ form.comments }}</span>
			</div>

		<hr>
		<div class="row spacer-small">
			<div class="col-md-2 col-sm-2 col-xs-6">
				<button class="btn btn-success btn-block" type="submit">Save</button>
			</div>
			<div class="col-md-2 col-sm-2 col-xs-6">
				<button class="btn btn-warning btn-block" data-dismiss="modal">Cancel</button>				
			</div>
		</div>
	</form>
</div>
<div class="row col-md-12">
	{% for entry in entries %}
		<div class="car-entry" name="entry_{{entry.id}}">
		{% include 'entry.html' %}
		</div>		
	{% endfor %}
</div>

{% endblock %}
{% block scripts %}
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script src="{% static 'registry/js/car.js' %}" type="text/javascript"></script>
<script src="{% static 'registry/js/add-entry.js' %}" type="text/javascript"></script>
{% endblock %}
